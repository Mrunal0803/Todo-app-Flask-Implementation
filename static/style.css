:root { --bg: #f6f8fb; --text: #111827; --muted: #6b7280; --card: #ffffff; --border: #e5e7eb; --primary: #7c3aed; --primary-600: #6d28d9; --primary-700: #5b21b6; --accent: #22d3ee; --danger: #ef4444; --success: #10b981; --info: #0ea5e9; }

* { box-sizing: border-box; }
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; background: var(--bg); color: var(--text); }
.container { max-width: 1040px; margin: 0 auto; padding: 16px; }

.site-header { background: linear-gradient(90deg, var(--primary), var(--accent)); border-bottom: 1px solid rgba(255,255,255,0.12); color: #fff; position: sticky; top: 0; z-index: 50; }
.brand { font-weight: 800; color: #fff; text-decoration: none; letter-spacing: 0.3px; }
.flex { display: flex; }
.between { justify-content: space-between; }
.center { align-items: center; }
.nav { list-style: none; padding: 0; margin: 0; display: flex; gap: 12px; }
.nav a { text-decoration: none; color: #fff; opacity: 0.95; }
.nav a:hover { opacity: 1; text-decoration: underline; }

/* Mobile nav */
.nav-wrap { display: flex; gap: 12px; align-items: center; }
#nav-toggle { display: none; background: rgba(255,255,255,0.18); color: #fff; border: 1px solid rgba(255,255,255,0.25); border-radius: 8px; width: 40px; height: 36px; cursor: pointer; }

.auth-card, .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; margin-top: 16px; box-shadow: 0 6px 18px rgba(2,6,23,0.06); }
.form-row { display: flex; flex-direction: column; gap: 6px; margin-bottom: 12px; }
label { font-weight: 600; color: var(--muted); }
input, textarea { padding: 12px 14px; border: 1px solid var(--border); border-radius: 10px; font-size: 14px; background: var(--card); color: var(--text); }

.password-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.password-input-wrapper input {
    flex: 1;
    padding-right: 40px;
}

.password-toggle {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    padding: 8px;
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: none;
}

.password-toggle:hover {
    transform: translateY(-50%);
    box-shadow: none;
}

.eye-icon {
    font-size: 16px;
    opacity: 0.6;
}

.password-toggle:hover .eye-icon {
    opacity: 1;
}
input:focus, textarea:focus { outline: none; border-color: var(--primary-600); box-shadow: 0 0 0 4px rgba(124,58,237,0.15); }
input.error, textarea.error { border-color: var(--danger); box-shadow: 0 0 0 3px rgba(239,68,68,0.15); }
.form-actions { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
.btn { border: 1px solid var(--border); background: var(--card); color: var(--text); padding: 10px 14px; border-radius: 10px; cursor: pointer; transition: transform 0.06s ease, box-shadow 0.2s ease; box-shadow: 0 2px 8px rgba(2,6,23,0.06); }
.btn.primary { background: var(--primary); color: #fff; border-color: transparent; }
.btn.primary:hover { filter: brightness(1.05); }
.btn.link { background: transparent; border: none; color: var(--info); text-decoration: none; padding: 0; }
.btn:hover { transform: translateY(-1px); box-shadow: 0 6px 16px rgba(2,6,23,0.12); }
.icon-btn { border: 1px solid var(--border); background: var(--card); border-radius: 10px; width: 40px; height: 40px; cursor: pointer; display: grid; place-items: center; }
.icon-btn.danger { color: var(--danger); border-color: var(--danger); }

.flash { padding: 10px 12px; border-radius: 10px; margin: 12px 0; }
.flash.error { background: rgba(239,68,68,0.12); color: #dc2626; border: 1px solid rgba(239,68,68,0.35); }
.flash.success { background: rgba(16,185,129,0.12); color: #059669; border: 1px solid rgba(16,185,129,0.35); }
.flash.info { background: rgba(14,165,233,0.12); color: #0284c7; border: 1px solid rgba(14,165,233,0.35); }

.todos h1 { margin-top: 8px; }
.todo-list { list-style: none; padding: 0; margin: 16px 0; display: flex; flex-direction: column; gap: 12px; }
.todo-item { display: grid; grid-template-columns: auto 1fr auto; gap: 8px; align-items: center; padding: 12px; background: var(--card); border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 4px 12px rgba(2,6,23,0.06); animation: fadeInUp 240ms ease both; }
.todo-item.done { 
    background-color: rgba(16, 185, 129, 0.1); 
    border-color: var(--success);
}
.todo-item.done .icon-btn {
    background-color: var(--success);
    border-color: var(--success);
    color: white;
}
.todo-item .edit-form { display: grid; grid-template-columns: 1fr 1fr auto; gap: 8px; }

.muted { color: var(--muted); }

/* Popup */
.popup.hidden { display: none; }
.popup { position: fixed; inset: 0; background: rgba(17,24,39,0.5); display: flex; align-items: center; justify-content: center; z-index: 999; backdrop-filter: blur(2px); }
.popup-content { 
    background: var(--card); 
    border-radius: 14px; 
    padding: 20px; 
    width: 90%; 
    max-width: 380px; 
    box-shadow: 0 20px 40px rgba(0,0,0,0.18); 
    text-align: center; 
    border: 1px solid var(--border);
    color: var(--text);
}
#popup-close { 
    margin-top: 8px;
}
.popup-content p {
    color: var(--text);
    font-size: 16px;
    margin-bottom: 16px;
}

/* Session timeout popup specific styles */
#session-timeout .popup-content {
    border-left: 4px solid var(--warning, #f59e0b);
}

#timeout-counter {
    font-weight: bold;
    color: var(--danger);
}

#session-timeout .form-actions {
    margin-top: 16px;
    justify-content: center;
}

/* Toasts */
#toasts { position: fixed; right: 16px; bottom: 16px; display: flex; flex-direction: column; gap: 10px; z-index: 1000; }
.toast { background: var(--card); border: 1px solid var(--border); color: var(--text); padding: 10px 12px; border-radius: 10px; min-width: 220px; box-shadow: 0 10px 20px rgba(2,6,23,0.2); animation: slideIn 250ms ease both; }
.toast.success { border-left: 4px solid var(--success); }
.toast.error { border-left: 4px solid var(--danger); }
.toast.info { border-left: 4px solid var(--info); }

/* Animations */
@keyframes fadeInUp { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideIn { from { opacity: 0; transform: translateY(8px) translateX(8px); } to { opacity: 1; transform: translateY(0) translateX(0); } }

/* Responsive */
@media (max-width: 720px) {
	.nav { display: none; position: absolute; right: 16px; top: 64px; flex-direction: column; gap: 10px; background: rgba(255,255,255,0.95); color: #111; padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.06); box-shadow: 0 10px 20px rgba(0,0,0,0.12); }
	.nav.show { display: flex; }
	#nav-toggle { display: inline-grid; place-items: center; }
	.todo-item .edit-form { grid-template-columns: 1fr; }
}

/* Avatars */
.avatar, .avatar-sm { border-radius: 999px; object-fit: cover; display: inline-block; }
.avatar { width: 112px; height: 112px; border: 3px solid var(--border); background: var(--card); }
.avatar-sm { width: 28px; height: 28px; border: 2px solid rgba(255,255,255,0.6); background: rgba(255,255,255,0.2); color: #fff; font-weight: 700; display: inline-grid; place-items: center; }
.avatar.placeholder, .avatar-sm.placeholder { background: linear-gradient(135deg, var(--primary), var(--accent)); color: #fff; display: inline-grid; place-items: center; font-weight: 800; }
.avatar.placeholder { width: 112px; height: 112px; border-radius: 999px; }

.avatar-row { display: grid; grid-template-columns: 140px 1fr; gap: 16px; align-items: center; }
.avatar-form input[type="file"] { padding: 8px; background: var(--card); color: var(--text); border-radius: 8px; border: 1px solid var(--border); }

hr { border: none; border-top: 1px solid var(--border); margin: 16px 0; }

@media (max-width: 720px) {
	.avatar-row { grid-template-columns: 1fr; justify-items: start; }
}

/* Homepage */
.hero { 
	position: relative; 
	overflow: hidden; 
	padding: 64px 16px; 
	background: 
		linear-gradient(135deg, rgba(124, 58, 237, 0.4) 0%, rgba(34, 211, 238, 0.4) 100%),
		url('/static/images/bag.jpg') center/cover no-repeat,
		var(--bg);
	background-attachment: fixed;
}
.hero-inner { position: relative; z-index: 1; max-width: 1040px; margin: 0 auto; text-align: center; background: rgba(255, 255, 255, 0.15); padding: 32px; border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.3); }
.hero-title { font-size: clamp(28px, 4.5vw, 48px); line-height: 1.1; margin: 8px 0; color: #ffffff; text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4); font-weight: 700; }
.hero-sub { font-size: clamp(14px, 2.2vw, 18px); color: #fff; margin-bottom: 16px; text-shadow: 0 1px 4px rgba(0, 0, 0, 0.3); font-weight: 500; }
.hero-ctas { display: inline-flex; gap: 10px; z-index: 2; }
.hero-ctas .btn { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
.hero-ctas .btn.primary { background: var(--primary); color: #fff; border-color: transparent; }
.hero-ctas .btn:not(.primary) { background: rgba(255, 255, 255, 0.9); color: var(--primary); border-color: rgba(255, 255, 255, 0.5); }
.hero-art .blob { position: absolute; filter: blur(60px); opacity: 0.6; border-radius: 999px; animation: float 20s ease-in-out infinite; }
.hero-art .one { width: 400px; height: 400px; background: var(--primary); top: -60px; left: -80px; animation-delay: 0s; }
.hero-art .two { width: 320px; height: 320px; background: var(--accent); bottom: -80px; right: -60px; animation-delay: 7s; }
.hero-art .three { width: 280px; height: 280px; background: #f472b6; top: 20%; right: 20%; animation-delay: 14s; }
@keyframes float {
	0%, 100% { transform: translate(0, 0) scale(1); }
	33% { transform: translate(30px, -30px) scale(1.1); }
	66% { transform: translate(-20px, 20px) scale(0.9); }
}

.features { 
	padding: 48px 16px; 
	background: 
		url('data:image/svg+xml,<svg width="60" height="60" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="dots" width="60" height="60" patternUnits="userSpaceOnUse"><circle cx="30" cy="30" r="2" fill="rgba(124,58,237,0.06)"/></pattern></defs><rect width="60" height="60" fill="url(%23dots)"/></svg>'),
		var(--bg);
	background-size: 60px 60px, 100% 100%;
}
.features-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
.feat-card { 
	background: var(--card); 
	border: 1px solid var(--border); 
	border-radius: 12px; 
	padding: 24px 20px; 
	box-shadow: 0 6px 18px rgba(2,6,23,0.06);
	background-image: 
		radial-gradient(circle at top right, rgba(124, 58, 237, 0.03), transparent 50%);
	transition: transform 0.2s ease, box-shadow 0.2s ease;
	text-align: center;
}
.feat-card:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(2,6,23,0.12); }
.feat-icon { 
	width: 80px; 
	height: 80px; 
	margin: 0 auto 16px; 
	display: flex; 
	align-items: center; 
	justify-content: center;
	background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(34, 211, 238, 0.1));
	border-radius: 16px;
	padding: 12px;
}
.feat-icon img { 
	max-width: 100%; 
	max-height: 100%; 
	object-fit: contain;
	width: 56px;
	height: 56px;
}
.feat-icon-fallback {
	font-size: 48px;
	line-height: 1;
}
.feat-card h3 { margin-top: 0; margin-bottom: 8px; }
.feat-card p { margin-bottom: 0; color: var(--muted); }

.cta { 
	padding: 48px 16px; 
	background: 
		linear-gradient(135deg, rgba(124, 58, 237, 0.08) 0%, rgba(34, 211, 238, 0.08) 100%),
		url('data:image/svg+xml,<svg width="80" height="80" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="waves" width="80" height="80" patternUnits="userSpaceOnUse"><path d="M0 40 Q20 20, 40 40 T80 40" fill="none" stroke="rgba(124,58,237,0.05)" stroke-width="2"/></pattern></defs><rect width="80" height="80" fill="url(%23waves)"/></svg>'),
		var(--bg);
	background-size: 100% 100%, 80px 80px, 100% 100%;
}
.cta.container .card { text-align: center; }

@media (max-width: 1000px) { .features-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 600px) { .features-grid { grid-template-columns: 1fr; } }
